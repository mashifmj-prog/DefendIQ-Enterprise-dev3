<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DefendIQ Enterprise | AI-Powered Cybersecurity</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1a237e;
            --primary-light: #534bae;
            --primary-dark: #000051;
            --secondary: #00b0ff;
            --accent: #ff4081;
            --light: #f5f5f5;
            --dark: #212121;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --gray: #9e9e9e;
            --silver: #C0C0C0;
            --gold: #FFD700;
            --platinum: #E5E4E2;
            --bronze: #CD7F32;
            --copper: #B87333;
            --bg-color: #f0f2f5;
            --text-color: #212121;
            --card-bg: white;
            --sidebar-bg: linear-gradient(to bottom, var(--primary), var(--primary-dark));
            --header-bg: white;
        }

        [data-theme="dark"] {
            --bg-color: #121212;
            --text-color: #f5f5f5;
            --card-bg: #1e1e1e;
            --sidebar-bg: linear-gradient(to bottom, #0d0d3d, #000022);
            --header-bg: #2d2d2d;
            --light: #2d2d2d;
            --gray: #aaaaaa;
            --dark: #f5f5f5;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background: var(--sidebar-bg);
            color: white;
            padding: 20px 0;
            transition: all 0.3s;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            position: fixed;
            height: 100vh;
            z-index: 100;
        }
        
        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }
        
        .logo-icon {
            font-size: 32px;
            margin-right: 10px;
        }
        
        .logo-text {
            font-size: 20px;
            font-weight: 700;
        }
        
        .logo-iq {
            color: var(--secondary);
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 20px 0;
        }
        
        .sidebar-menu li {
            padding: 10px 20px;
            transition: all 0.3s;
        }
        
        .sidebar-menu li.active {
            background-color: rgba(255,255,255,0.1);
            border-left: 4px solid var(--secondary);
        }
        
        .sidebar-menu li:hover {
            background-color: rgba(255,255,255,0.05);
        }
        
        .sidebar-menu a {
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        
        .sidebar-menu i {
            margin-right: 10px;
            font-size: 18px;
        }
        
        /* Main Content Styles */
        .main-content {
            flex: 1;
            padding: 20px;
            margin-left: 250px;
            width: calc(100% - 250px);
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 15px 20px;
            background: var(--header-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--primary);
        }

        .back-button {
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-right: 15px;
        }
        
        .header-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #0091ea;
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
        
        /* Theme Toggle */
        .theme-toggle-container {
            position: absolute;
            top: 30px;
            right: 30px;
            z-index: 10;
        }
        
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--card-bg);
            padding: 8px 15px;
            border-radius: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            border: 1px solid var(--light);
        }
        
        .theme-toggle i {
            font-size: 18px;
            color: var(--primary);
        }
        
        .theme-toggle span {
            font-weight: 500;
            color: var(--text-color);
        }
        
        /* Crescent Indicators */
        .crescent-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            margin: 0 5px;
        }
        
        .crescent-dark {
            background: linear-gradient(135deg, #1a237e, #534bae);
            color: white;
        }
        
        .crescent-light {
            background: linear-gradient(135deg, #bbdefb, #e3f2fd);
            color: #1a237e;
        }
        
        /* Ranking System Styles */
        .ranking-container {
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 30px;
            margin-bottom: 30px;
            display: none;
        }
        
        .ranking-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .ranking-title {
            font-size: 28px;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .ranking-subtitle {
            font-size: 16px;
            color: var(--gray);
        }
        
        .ranking-levels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .ranking-level {
            background: var(--light);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .ranking-level:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .ranking-level.copper {
            border-color: var(--copper);
        }
        
        .ranking-level.bronze {
            border-color: var(--bronze);
        }
        
        .ranking-level.silver {
            border-color: var(--silver);
        }
        
        .ranking-level.gold {
            border-color: var(--gold);
        }
        
        .ranking-level.platinum {
            border-color: var(--platinum);
        }
        
        .ranking-badge {
            font-size: 40px;
            margin-bottom: 15px;
        }
        
        .ranking-name {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .ranking-copper .ranking-name {
            color: var(--copper);
        }
        
        .ranking-bronze .ranking-name {
            color: var(--bronze);
        }
        
        .ranking-silver .ranking-name {
            color: var(--silver);
        }
        
        .ranking-gold .ranking-name {
            color: var(--gold);
        }
        
        .ranking-platinum .ranking-name {
            color: var(--platinum);
        }
        
        .ranking-percentage {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 10px;
        }
        
        .ranking-description {
            font-size: 14px;
            color: var(--gray);
        }
        
        .achievement-structure {
            background: var(--light);
            border-radius: 8px;
            padding: 25px;
            margin-top: 30px;
        }
        
        .achievement-title {
            font-size: 20px;
            color: var(--primary);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .achievement-levels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .achievement-level {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            border-left: 4px solid var(--secondary);
        }
        
        .achievement-level-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .achievement-level-desc {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 15px;
        }
        
        .achievement-features {
            list-style: none;
        }
        
        .achievement-features li {
            padding: 5px 0;
            font-size: 14px;
            display: flex;
            align-items: center;
        }
        
        .achievement-features li:before {
            content: "✓";
            color: var(--success);
            margin-right: 8px;
            font-weight: bold;
        }
        
        /* Leadership Section */
        .leadership-container {
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 30px;
            margin-bottom: 30px;
            display: none;
        }
        
        .leadership-title {
            font-size: 24px;
            color: var(--primary);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .leadership-hierarchy {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .hierarchy-level {
            display: flex;
            align-items: center;
            gap: 15px;
            background: var(--light);
            padding: 15px 20px;
            border-radius: 8px;
            width: 100%;
            max-width: 500px;
        }
        
        .hierarchy-badge {
            font-size: 24px;
        }
        
        .hierarchy-info {
            flex: 1;
        }
        
        .hierarchy-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .hierarchy-desc {
            font-size: 14px;
            color: var(--gray);
        }
        
        .thank-you-section {
            background: var(--light);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .thank-you-title {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .thank-you-desc {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 20px;
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 60px 40px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.05)"/></svg>');
            background-size: cover;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .hero h1 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .slogan {
            font-size: 1.8rem;
            margin-bottom: 30px;
            font-weight: 300;
        }
        
        .slogan-part1 {
            color: #ffffff;
        }
        
        .slogan-part2 {
            color: var(--secondary);
        }
        
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .hero-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }
        
        .btn-hero {
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 30px;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid white;
            color: white;
        }
        
        .btn-outline:hover {
            background: white;
            color: var(--primary);
        }
        
        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--gray);
        }
        
        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .card-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .card-change {
            font-size: 14px;
            display: flex;
            align-items: center;
        }
        
        .positive {
            color: var(--success);
        }
        
        .negative {
            color: var(--danger);
        }
        
        /* Security Tips Banner */
        .tips-banner {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-left: 4px solid var(--secondary);
            overflow: hidden;
            position: relative;
        }
        
        .tip-content {
            font-size: 16px;
            font-weight: 500;
            text-align: center;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* ZaraAI Chat Interface */
        .zara-ai-container {
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .zara-header {
            background: linear-gradient(to right, var(--primary), var(--primary-light));
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
        }
        
        .zara-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: white;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }
        
        .zara-info h3 {
            margin-bottom: 5px;
        }
        
        .zara-info p {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .zara-status {
            margin-left: auto;
            display: flex;
            align-items: center;
            font-size: 14px;
        }
        
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--success);
            margin-right: 5px;
        }
        
        .zara-chat {
            height: 300px;
            padding: 20px;
            overflow-y: auto;
            border-bottom: 1px solid var(--light);
        }
        
        .message {
            margin-bottom: 15px;
            display: flex;
        }
        
        .message.user {
            justify-content: flex-end;
        }
        
        .message-content {
            max-width: 70%;
            padding: 10px 15px;
            border-radius: 18px;
        }
        
        .message.zara .message-content {
            background-color: var(--light);
            border-top-left-radius: 5px;
        }
        
        .message.user .message-content {
            background-color: var(--secondary);
            color: white;
            border-top-right-radius: 5px;
        }
        
        .zara-input {
            display: flex;
            padding: 15px;
            background-color: var(--light);
        }
        
        .zara-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid var(--light);
            border-radius: 24px;
            outline: none;
            font-size: 14px;
            background: var(--card-bg);
            color: var(--text-color);
        }
        
        .zara-input button {
            background-color: var(--secondary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }
        
        .zara-input button:hover {
            background-color: var(--primary);
        }
        
        /* Modules Section */
        .modules-container {
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 30px;
            margin-bottom: 30px;
            display: none;
        }
        
        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .module-card {
            background: var(--light);
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            position: relative;
        }
        
        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-color: var(--secondary);
        }
        
        .module-card.selected {
            border-color: var(--secondary);
            background: rgba(0, 176, 255, 0.1);
        }
        
        .module-icon {
            font-size: 32px;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .module-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .module-desc {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 15px;
        }
        
        .module-progress {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .progress-text {
            font-size: 14px;
            color: var(--gray);
        }
        
        .progress-bar {
            width: 100px;
            height: 6px;
            background-color: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--secondary);
            width: 0%;
            transition: width 0.5s;
        }
        
        .module-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .module-card:hover .module-actions {
            opacity: 1;
        }
        
        .module-card.selected .module-actions {
            opacity: 1;
        }
        
        .btn-module {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 4px;
        }
        
        /* Learning Content Section */
        .learning-container {
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 30px;
            margin-bottom: 30px;
            display: none;
        }
        
        .learning-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light);
        }
        
        .learning-title {
            font-size: 24px;
            color: var(--primary);
        }
        
        .learning-content {
            margin-bottom: 30px;
        }
        
        .content-section {
            margin-bottom: 25px;
            padding: 20px;
            background: var(--light);
            border-radius: 8px;
        }
        
        .content-section h3 {
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .content-section p {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        .content-section ul {
            padding-left: 20px;
            margin-bottom: 10px;
        }
        
        .content-section li {
            margin-bottom: 5px;
        }
        
        .learning-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }
        
        /* Quiz Section */
        .quiz-container {
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 30px;
            margin-bottom: 30px;
            display: none;
        }
        
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .quiz-title {
            font-size: 24px;
            color: var(--primary);
        }
        
        .quiz-progress {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .progress-bar {
            width: 200px;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--secondary);
            width: 0%;
            transition: width 0.5s;
        }
        
        .quiz-question {
            font-size: 18px;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .quiz-options {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .quiz-option {
            padding: 15px;
            border: 1px solid var(--light);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .quiz-option:hover {
            border-color: var(--secondary);
            background-color: rgba(0, 176, 255, 0.05);
        }
        
        .quiz-option.selected {
            border-color: var(--secondary);
            background-color: rgba(0, 176, 255, 0.1);
        }
        
        .quiz-option.correct {
            border-color: var(--success);
            background-color: rgba(76, 175, 80, 0.1);
        }
        
        .quiz-option.incorrect {
            border-color: var(--danger);
            background-color: rgba(244, 67, 54, 0.1);
        }
        
        .quiz-actions {
            display: flex;
            justify-content: space-between;
        }
        
        /* Test Section */
        .test-container {
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 30px;
            margin-bottom: 30px;
            display: none;
        }
        
        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light);
        }
        
        .test-title {
            font-size: 24px;
            color: var(--primary);
        }
        
        .test-timer {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .test-instructions {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .test-instructions h3 {
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .test-instructions ul {
            padding-left: 20px;
        }
        
        .test-instructions li {
            margin-bottom: 5px;
        }
        
        /* Celebration Animation */
        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            display: none;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--secondary);
            opacity: 0.8;
            animation: fall linear forwards;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }
        
        /* Certificate Section */
        .certificate-container {
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 30px;
            margin-bottom: 30px;
            display: none;
        }
        
        .certificate {
            background: linear-gradient(135deg, #1a237e 0%, #283593 50%, #303f9f 100%);
            color: white;
            padding: 40px;
            border-radius: 12px;
            text-align: center;
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .certificate::before {
            content: "";
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            pointer-events: none;
        }
        
        .certificate-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .certificate-logo-icon {
            font-size: 40px;
            margin-right: 15px;
        }
        
        .certificate-logo-text {
            font-size: 28px;
            font-weight: 700;
        }
        
        .certificate-title {
            font-size: 36px;
            margin-bottom: 10px;
            font-weight: 700;
            color: var(--secondary);
        }
        
        .certificate-subtitle {
            font-size: 18px;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        
        .certificate-awarded {
            font-size: 20px;
            margin-bottom: 30px;
        }
        
        .certificate-recipient {
            font-size: 32px;
            margin: 20px 0;
            font-weight: 700;
            color: white;
            background: rgba(0,0,0,0.2);
            padding: 10px 20px;
            border-radius: 8px;
            display: inline-block;
        }
        
        .certificate-module {
            font-size: 24px;
            margin: 20px 0;
            font-weight: 600;
            color: white;
            background: rgba(0,0,0,0.3);
            padding: 10px 20px;
            border-radius: 8px;
            display: inline-block;
        }
        
        .certificate-details {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.2);
        }
        
        .certificate-signature {
            text-align: center;
        }
        
        .signature-line {
            width: 200px;
            height: 1px;
            background: white;
            margin: 5px auto;
        }
        
        .certificate-qr {
            width: 100px;
            height: 100px;
            background: #f5f5f5;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            color: #333;
            font-size: 12px;
        }
        
        .certificate-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        .tier-badge {
            font-size: 40px;
            margin-bottom: 20px;
        }
        
        /* Security Dashboard */
        .security-dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .threats-card, .actions-card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .card-title-large {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .threat-item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--light);
        }
        
        .threat-item:last-child {
            border-bottom: none;
        }
        
        .threat-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
        }
        
        .threat-info {
            flex: 1;
        }
        
        .threat-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .threat-desc {
            font-size: 14px;
            color: var(--gray);
        }
        
        .threat-severity {
            font-size: 12px;
            padding: 3px 10px;
            border-radius: 12px;
            color: white;
        }
        
        .severity-high {
            background-color: var(--danger);
        }
        
        .severity-medium {
            background-color: var(--warning);
        }
        
        .severity-low {
            background-color: var(--success);
        }
        
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .action-button {
            background: var(--card-bg);
            border: 1px solid var(--light);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .action-button:hover {
            border-color: var(--secondary);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .action-icon {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .action-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .action-desc {
            font-size: 12px;
            color: var(--gray);
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: var(--gray);
            font-size: 14px;
            border-top: 1px solid var(--light);
            margin-top: 30px;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .security-dashboard {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                width: 70px;
                overflow: hidden;
            }
            
            .sidebar-header .logo-text, 
            .sidebar-menu span {
                display: none;
            }
            
            .sidebar-menu li {
                text-align: center;
                padding: 15px 10px;
            }
            
            .sidebar-menu i {
                margin-right: 0;
                font-size: 20px;
            }
            
            .main-content {
                margin-left: 70px;
                width: calc(100% - 70px);
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .slogan {
                font-size: 1.4rem;
            }
            
            .theme-toggle-container {
                top: 20px;
                right: 20px;
            }
            
            .ranking-levels {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
            
            .sidebar-menu {
                display: flex;
                overflow-x: auto;
                padding: 10px 0;
            }
            
            .sidebar-menu li {
                padding: 10px 15px;
                white-space: nowrap;
            }
            
            .main-content {
                margin-left: 0;
                width: 100%;
            }
            
            .dashboard-cards {
                grid-template-columns: 1fr 1fr;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn-hero {
                width: 100%;
                max-width: 300px;
            }
            
            .modules-grid {
                grid-template-columns: 1fr;
            }
            
            .theme-toggle-container {
                position: relative;
                top: 0;
                right: 0;
                margin-bottom: 20px;
                display: flex;
                justify-content: flex-end;
            }
            
            .ranking-levels {
                grid-template-columns: 1fr;
            }
            
            .achievement-levels {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 576px) {
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                grid-template-columns: 1fr;
            }
            
            .hero {
                padding: 40px 20px;
            }
            
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .slogan {
                font-size: 1.2rem;
            }
            
            .certificate {
                padding: 20px;
            }
            
            .certificate-title {
                font-size: 28px;
            }
            
            .certificate-recipient {
                font-size: 24px;
            }
            
            .certificate-details {
                flex-direction: column;
                gap: 20px;
            }
            
            .theme-toggle span {
                display: none;
            }
            
            .header-actions {
                flex-wrap: wrap;
                justify-content: flex-end;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">🛡️</div>
                    <div class="logo-text">Defend<span class="logo-iq">IQ</span> Enterprise</div>
                </div>
                <div>ZaraAI Integrated</div>
            </div>
            <ul class="sidebar-menu">
                <li class="active"><a href="#" id="home-link"><i class="fas fa-home"></i> <span>Home</span></a></li>
                <li><a href="#"><i class="fas fa-search"></i> <span>Threat Analysis</span></a></li>
                <li><a href="#"><i class="fas fa-shield-alt"></i> <span>Security Controls</span></a></li>
                <li><a href="#"><i class="fas fa-chart-line"></i> <span>Reports</span></a></li>
                <li><a href="#" id="training-link"><i class="fas fa-graduation-cap"></i> <span>Training</span></a></li>
                <li><a href="#" id="quiz-link"><i class="fas fa-question-circle"></i> <span>Knowledge Quiz</span></a></li>
                <li><a href="#" id="certificates-link"><i class="fas fa-award"></i> <span>Certificates</span></a></li>
                <li><a href="#" id="ranking-link"><i class="fas fa-trophy"></i> <span>Ranking System</span></a></li>
                <li><a href="#" id="leadership-link"><i class="fas fa-users"></i> <span>Leadership</span></a></li>
                <li><a href="#"><i class="fas fa-cog"></i> <span>Settings</span></a></li>
            </ul>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Theme Toggle -->
            <div class="theme-toggle-container">
                <div class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                    <span id="theme-label">Dark Mode</span>
                </div>
            </div>
            
            <div class="header">
                <div style="display: flex; align-items: center;">
                    <button class="back-button" id="back-button" style="display: none;">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <div class="page-title" id="page-title">Security Dashboard</div>
                </div>
                <div class="header-actions">
                    <div class="crescent-indicator crescent-dark">🌙</div>
                    <button class="btn btn-primary" id="refresh-btn">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <div class="crescent-indicator crescent-light">☀️</div>
                    <div class="user-info">
                        <div class="user-avatar">MJ</div>
                        <div>Admin User</div>
                    </div>
                </div>
            </div>
            
            <!-- Security Tips Banner -->
            <div class="tips-banner">
                <div class="tip-content" id="tip-content">Use strong, unique passwords for all your accounts</div>
            </div>
            
            <!-- Hero Section -->
            <div class="hero" id="hero-section">
                <div class="hero-content">
                    <h1>Enterprise Cybersecurity Intelligence</h1>
                    <div class="slogan">
                        <span class="slogan-part1">Defend with Confidence</span> 
                        <span class="slogan-part2">Grow with Ease</span>
                    </div>
                    <p>DefendIQ Enterprise with ZaraAI delivers advanced threat protection, security training, and compliance management in one integrated platform.</p>
                    <div class="hero-buttons">
                        <button class="btn btn-hero btn-secondary">Request Demo</button>
                        <button class="btn btn-hero btn-outline">Explore Features</button>
                    </div>
                </div>
            </div>
            
            <!-- Dashboard Cards -->
            <div class="dashboard-cards" id="dashboard-cards">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Active Threats</div>
                        <div class="card-icon" style="background-color: var(--danger);">⚠️</div>
                    </div>
                    <div class="card-value">12</div>
                    <div class="card-change positive">↓ 3 from yesterday</div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Protected Assets</div>
                        <div class="card-icon" style="background-color: var(--success);">🛡️</div>
                    </div>
                    <div class="card-value">247</div>
                    <div class="card-change positive">↑ 5 new</div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Security Score</div>
                        <div class="card-icon" style="background-color: var(--secondary);">📊</div>
                    </div>
                    <div class="card-value">92%</div>
                    <div class="card-change positive">↑ 2% improvement</div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">ZaraAI Activity</div>
                        <div class="card-icon" style="background-color: var(--primary);">🤖</div>
                    </div>
                    <div class="card-value">87%</div>
                    <div class="card-change positive">Active & Monitoring</div>
                </div>
            </div>
            
            <!-- Ranking System Section -->
            <div class="ranking-container" id="ranking-section">
                <div class="ranking-header">
                    <div class="ranking-title">DefendIQ Achievement Ranking System</div>
                    <div class="ranking-subtitle">Progress through five tiers of cybersecurity excellence</div>
                </div>
                
                <div class="ranking-levels">
                    <div class="ranking-level ranking-copper copper">
                        <div class="ranking-badge">🟤</div>
                        <div class="ranking-name">Copper</div>
                        <div class="ranking-percentage">60% Completion</div>
                        <div class="ranking-description">Entry-level foundation</div>
                    </div>
                    
                    <div class="ranking-level ranking-bronze bronze">
                        <div class="ranking-badge">🥉</div>
                        <div class="ranking-name">Bronze</div>
                        <div class="ranking-percentage">70% Completion</div>
                        <div class="ranking-description">Developing progress</div>
                    </div>
                    
                    <div class="ranking-level ranking-silver silver">
                        <div class="ranking-badge">🥈</div>
                        <div class="ranking-name">Silver</div>
                        <div class="ranking-percentage">80% Completion</div>
                        <div class="ranking-description">Standard proficiency</div>
                    </div>
                    
                    <div class="ranking-level ranking-gold gold">
                        <div class="ranking-badge">🥇</div>
                        <div class="ranking-name">Gold</div>
                        <div class="ranking-percentage">90% Completion</div>
                        <div class="ranking-description">Premium advanced</div>
                    </div>
                    
                    <div class="ranking-level ranking-platinum platinum">
                        <div class="ranking-badge">💿</div>
                        <div class="ranking-name">Platinum</div>
                        <div class="ranking-percentage">100% Completion</div>
                        <div class="ranking-description">Highest elite tier</div>
                    </div>
                </div>
                
                <div class="achievement-structure">
                    <div class="achievement-title">Multi-Level Achievement System</div>
                    <div class="achievement-levels">
                        <div class="achievement-level">
                            <div class="achievement-level-title">Individual Achievements</div>
                            <div class="achievement-level-desc">Personal growth and certification</div>
                            <ul class="achievement-features">
                                <li>Earn certificates per module completion</li>
                                <li>Complete all modules for Team Achievement</li>
                                <li>Join up to 3 teams simultaneously</li>
                                <li>Progress through 5 ranking tiers</li>
                            </ul>
                        </div>
                        
                        <div class="achievement-level">
                            <div class="achievement-level-title">Team Achievements</div>
                            <div class="achievement-level-desc">Collective training goals</div>
                            <ul class="achievement-features">
                                <li>Form or join cybersecurity teams</li>
                                <li>Pursue individual and team goals</li>
                                <li>Certificates automatically emailed</li>
                                <li>Share/print enabled for demo</li>
                            </ul>
                        </div>
                        
                        <div class="achievement-level">
                            <div class="achievement-level-title">Departmental Hierarchy</div>
                            <div class="achievement-level-desc">Leadership recognition system</div>
                            <ul class="achievement-features">
                                <li>Senior Managers → team compliance</li>
                                <li>Executives/Chiefs → department achievement</li>
                                <li>CEOs → business unit performance</li>
                                <li>Group CEO → corporate-wide excellence</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Leadership Section -->
            <div class="leadership-container" id="leadership-section">
                <div class="leadership-title">Leadership Recognition & Appreciation</div>
                
                <div class="leadership-hierarchy">
                    <div class="hierarchy-level">
                        <div class="hierarchy-badge">👨‍💼</div>
                        <div class="hierarchy-info">
                            <div class="hierarchy-name">Senior Managers</div>
                            <div class="hierarchy-desc">Achieve when all team members reach compliance</div>
                        </div>
                    </div>
                    
                    <div class="hierarchy-level">
                        <div class="hierarchy-badge">👔</div>
                        <div class="hierarchy-info">
                            <div class="hierarchy-name">Executives & Chiefs</div>
                            <div class="hierarchy-desc">Achieve when all Senior Managers under them succeed</div>
                        </div>
                    </div>
                    
                    <div class="hierarchy-level">
                        <div class="hierarchy-badge">🎯</div>
                        <div class="hierarchy-info">
                            <div class="hierarchy-name">CEOs</div>
                            <div class="hierarchy-desc">Based on business unit performance metrics</div>
                        </div>
                    </div>
                    
                    <div class="hierarchy-level">
                        <div class="hierarchy-badge">🏆</div>
                        <div class="hierarchy-info">
                            <div class="hierarchy-name">Group CEO</div>
                            <div class="hierarchy-desc">Ultimate recognition for corporate-wide excellence</div>
                        </div>
                    </div>
                </div>
                
                <div class="thank-you-section">
                    <div class="thank-you-title">Leader Appreciation System</div>
                    <div class="thank-you-desc">All leaders can send two customized "Thank You" messages to their teams</div>
                    <button class="btn btn-secondary" id="send-thanks-btn">
                        <i class="fas fa-heart"></i> Send Appreciation Message
                    </button>
                </div>
            </div>
            
            <!-- Modules Section -->
            <div class="modules-container" id="modules-section">
                <h2>Cybersecurity Training Modules</h2>
                <p>Select a module to begin your training. ZaraAI will track your progress and recommend the best path for your learning journey.</p>
                
                <div class="modules-grid" id="modules-grid">
                    <!-- Modules will be dynamically added here -->
                </div>
            </div>
            
            <!-- Learning Content Section -->
            <div class="learning-container" id="learning-section">
                <div class="learning-header">
                    <div class="learning-title" id="learning-title">Cybersecurity Fundamentals</div>
                    <div class="learning-progress">
                        <span>Progress: </span>
                        <span id="learning-progress-text">0%</span>
                    </div>
                </div>
                
                <div class="learning-content" id="learning-content">
                    <!-- Learning content will be dynamically added here -->
                </div>
                
                <div class="learning-actions">
                    <button class="btn btn-secondary" id="start-quiz-btn">
                        <i class="fas fa-play"></i> Start Quiz
                    </button>
                    <button class="btn btn-primary" id="review-material-btn">
                        <i class="fas fa-redo"></i> Review Material
                    </button>
                </div>
            </div>
            
            <!-- Quiz Section -->
            <div class="quiz-container" id="quiz-section">
                <div class="quiz-header">
                    <div class="quiz-title" id="quiz-module-title">Cybersecurity Fundamentals Quiz</div>
                    <div class="quiz-progress">
                        <span>Progress:</span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="quiz-progress"></div>
                        </div>
                        <span id="quiz-progress-text">0/5</span>
                    </div>
                </div>
                
                <div class="quiz-question" id="quiz-question">
                    What is the primary purpose of multi-factor authentication (MFA)?
                </div>
                
                <div class="quiz-options" id="quiz-options">
                    <!-- Quiz options will be dynamically added here -->
                </div>
                
                <div class="quiz-actions">
                    <button class="btn btn-primary" id="prev-question" disabled>
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="btn btn-secondary" id="next-question">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            
            <!-- Test Section -->
            <div class="test-container" id="test-section">
                <div class="test-header">
                    <div class="test-title" id="test-module-title">Cybersecurity Fundamentals Test</div>
                    <div class="test-timer" id="test-timer">Time: 30:00</div>
                </div>
                
                <div class="test-instructions">
                    <h3>Test Instructions</h3>
                    <ul>
                        <li>This test consists of 10 questions</li>
                        <li>You have 30 minutes to complete the test</li>
                        <li>Once you start, the timer will begin counting down</li>
                        <li>You cannot pause the test once started</li>
                        <li>ZaraAI will not provide assistance during the test</li>
                    </ul>
                </div>
                
                <div class="test-actions">
                    <button class="btn btn-secondary" id="start-test-btn">
                        <i class="fas fa-play"></i> Start Test
                    </button>
                </div>
            </div>
            
            <!-- ZaraAI Chat Interface -->
            <div class="zara-ai-container">
                <div class="zara-header">
                    <div class="zara-avatar">Z</div>
                    <div class="zara-info">
                        <h3>ZaraAI Security Assistant</h3>
                        <p>Your AI-powered security companion & productivity partner</p>
                    </div>
                    <div class="zara-status">
                        <div class="status-indicator"></div>
                        <span>Online</span>
                    </div>
                </div>
                
                <div class="zara-chat" id="chat-messages">
                    <div class="message zara">
                        <div class="message-content">
                            Hello! I'm ZaraAI, your security assistant and productivity partner. I'm here to help protect your enterprise and support your success. How can I assist you today?
                        </div>
                    </div>
                    <div class="message user">
                        <div class="message-content">
                            Welcome back Zara! Can you give me a security status update?
                        </div>
                    </div>
                    <div class="message zara">
                        <div class="message-content">
                            Certainly! I'm currently monitoring 247 assets. There are 12 active threats, mostly medium severity. Your security score is at 92%, which is excellent. I've blocked 43 intrusion attempts in the last 24 hours.
                        </div>
                    </div>
                </div>
                
                <div class="zara-input">
                    <input type="text" id="user-input" placeholder="Ask ZaraAI about security, training, or productivity...">
                    <button id="send-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
            
            <!-- Certificate Section -->
            <div class="certificate-container" id="certificate-section">
                <div class="certificate" id="certificate">
                    <div class="certificate-logo">
                        <div class="certificate-logo-icon">🛡️</div>
                        <div class="certificate-logo-text">Defend<span style="color: var(--secondary);">IQ</span> Enterprise</div>
                    </div>
                    
                    <div class="certificate-title">Certificate of Achievement</div>
                    <div class="certificate-subtitle">This certifies that</div>
                    
                    <div class="certificate-recipient" id="certificate-recipient">Your Name</div>
                    
                    <div class="certificate-awarded">has successfully completed the</div>
                    
                    <div class="certificate-module" id="certificate-module">Cybersecurity Fundamentals Module</div>
                    
                    <div class="tier-badge" id="tier-badge">🥇</div>
                    
                    <div class="certificate-details">
                        <div class="certificate-signature">
                            <div>MJ Mashifane</div>
                            <div class="signature-line"></div>
                            <div>Cybersecurity Lead</div>
                        </div>
                        
                        <div class="certificate-date">
                            <div id="certificate-date">October 15, 2025</div>
                            <div class="signature-line"></div>
                            <div>Date of Completion</div>
                        </div>
                        
                        <div class="certificate-verification">
                            <div class="certificate-qr">QR CODE</div>
                            <div>Verification Code: DIQ-2025-001</div>
                        </div>
                    </div>
                </div>
                
                <div class="certificate-actions">
                    <button class="btn btn-primary" id="share-certificate">
                        <i class="fas fa-share-alt"></i> Share Certificate
                    </button>
                    <button class="btn btn-secondary" id="next-module">
                        <i class="fas fa-arrow-right"></i> Next Module
                    </button>
                </div>
                
                <div class="zara-message" style="margin-top: 30px; padding: 20px; background: rgba(0, 176, 255, 0.1); border-radius: 8px; border-left: 4px solid var(--secondary);">
                    <div style="display: flex; align-items: center; margin-bottom: 10px;">
                        <div style="width: 30px; height: 30px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; margin-right: 10px; font-weight: bold;">Z</div>
                        <div style="font-weight: 600;">ZaraAI</div>
                    </div>
                    <div id="zara-certificate-message">Congratulations on completing this module! You're making excellent progress in your cybersecurity journey. I'm here to help you with the next module whenever you're ready.</div>
                </div>
            </div>
            
            <!-- Security Dashboard -->
            <div class="security-dashboard" id="security-dashboard">
                <div class="threats-card">
                    <div class="card-title-large">Recent Security Threats</div>
                    
                    <div class="threat-item">
                        <div class="threat-icon" style="background-color: var(--danger);">⚠️</div>
                        <div class="threat-info">
                            <div class="threat-name">Suspicious Login Attempts</div>
                            <div class="threat-desc">Multiple failed login attempts from unknown IP addresses</div>
                        </div>
                        <div class="threat-severity severity-high">High</div>
                    </div>
                    
                    <div class="threat-item">
                        <div class="threat-icon" style="background-color: var(--warning);">🔍</div>
                        <div class="threat-info">
                            <div class="threat-name">Data Exfiltration Attempt</div>
                            <div class="threat-desc">Unusual data transfer patterns detected</div>
                        </div>
                        <div class="threat-severity severity-medium">Medium</div>
                    </div>
                    
                    <div class="threat-item">
                        <div class="threat-icon" style="background-color: var(--warning);">🌐</div>
                        <div class="threat-info">
                            <div class="threat-name">Phishing Campaign Detected</div>
                            <div class="threat-desc">New phishing emails targeting employees</div>
                        </div>
                        <div class="threat-severity severity-medium">Medium</div>
                    </div>
                    
                    <div class="threat-item">
                        <div class="threat-icon" style="background-color: var(--success);">📊</div>
                        <div class="threat-info">
                            <div class="threat-name">Vulnerability Scan Complete</div>
                            <div class="threat-desc">Routine scan completed, 3 low-risk issues found</div>
                        </div>
                        <div class="threat-severity severity-low">Low</div>
                    </div>
                </div>
                
                <div class="actions-card">
                    <div class="card-title-large">Quick Actions</div>
                    
                    <div class="action-buttons">
                        <div class="action-button">
                            <div class="action-icon">🔍</div>
                            <div class="action-title">Run Security Scan</div>
                            <div class="action-desc">Initiate a comprehensive system scan</div>
                        </div>
                        
                        <div class="action-button">
                            <div class="action-icon">📋</div>
                            <div class="action-title">Generate Report</div>
                            <div class="action-desc">Create security status report</div>
                        </div>
                        
                        <div class="action-button">
                            <div class="action-icon">🛡️</div>
                            <div class="action-title">Update Policies</div>
                            <div class="action-desc">Modify security rules and policies</div>
                        </div>
                        
                        <div class="action-button">
                            <div class="action-icon">🤖</div>
                            <div class="action-title">ZaraAI Analysis</div>
                            <div class="action-desc">Deep threat analysis with AI</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer">
                DefendIQ Enterprise with ZaraAI | © 2025 Security Systems | All rights reserved
            </div>
        </div>
    </div>

    <!-- Celebration Animation -->
    <div class="celebration" id="celebration"></div>

    <script>
        // Current application state
        let currentState = {
            page: 'dashboard',
            theme: 'light',
            currentModule: null,
            quiz: {
                currentQuestion: 0,
                score: 0,
                completed: false
            },
            test: {
                inProgress: false,
                timeRemaining: 1800, // 30 minutes in seconds
                timer: null
            },
            certificates: {
                earned: 0,
                currentTier: 'silver'
            },
            userProgress: {
                modules: {},
                overallProgress: 0
            },
            securityTips: [
                "Use strong, unique passwords for all your accounts",
                "Enable multi-factor authentication whenever possible",
                "Keep your software and systems updated regularly",
                "Be cautious of phishing emails and suspicious links",
                "Regularly back up your important data",
                "Use a VPN when connecting to public Wi-Fi networks",
                "Educate yourself about social engineering tactics",
                "Implement the principle of least privilege for access control",
                "Regularly review and update your security policies",
                "Conduct security awareness training for all employees",
                "Deepfake attacks are rising - verify video calls with known contacts",
                "Report security incidents immediately to your IT department",
                "Create a security-first culture where everyone feels responsible",
                "Third-party vendors must comply with your Acceptable Use Policy",
                "Mobile devices need the same security as desktop computers",
                "Cloud security requires shared responsibility between you and providers"
            ],
            currentTipIndex: 0,
            leadership: {
                thankYouMessages: 2 // Leaders start with 2 thank you messages
            },
            userProfile: {
                humorStyle: 'professional',
                lastActivity: new Date(),
                meetingReminders: true
            }
        };

        // Enhanced Training modules data with new modules
        const trainingModules = [
            {
                id: 'fundamentals',
                title: 'Cybersecurity Fundamentals',
                icon: '🛡️',
                description: 'Learn the basics of cybersecurity, common threats, and protection strategies.',
                progress: 0,
                content: [
                    {
                        title: 'Introduction to Cybersecurity',
                        sections: [
                            {
                                title: 'What is Cybersecurity?',
                                content: 'Cybersecurity is the practice of protecting systems, networks, and programs from digital attacks. These attacks are usually aimed at accessing, changing, or destroying sensitive information; extorting money from users; or interrupting normal business processes.'
                            },
                            {
                                title: 'Why is Cybersecurity Important?',
                                content: 'In today\'s connected world, everyone benefits from advanced cyber defense programs. At an individual level, a cybersecurity attack can result in everything from identity theft to extortion attempts to the loss of important data like family photos.'
                            },
                            {
                                title: 'Common Cyber Threats',
                                content: 'Malware, Phishing, Ransomware, Social Engineering, and Denial of Service attacks are some of the most common cyber threats facing individuals and organizations today.'
                            }
                        ]
                    },
                    {
                        title: 'Protecting Your Digital Identity',
                        sections: [
                            {
                                title: 'Strong Passwords',
                                content: 'Use long, complex passwords that include a mix of letters, numbers, and symbols. Avoid using personal information or common words.'
                            },
                            {
                                title: 'Multi-Factor Authentication',
                                content: 'MFA adds an extra layer of security by requiring two or more verification factors to gain access to a resource.'
                            },
                            {
                                title: 'Secure Browsing Habits',
                                content: 'Always look for HTTPS in website URLs, avoid clicking on suspicious links, and be cautious about what information you share online.'
                            }
                        ]
                    }
                ],
                quiz: [
                    {
                        question: "What is the primary purpose of multi-factor authentication (MFA)?",
                        options: [
                            "To add an extra layer of security beyond just passwords",
                            "To replace passwords entirely",
                            "To speed up the login process",
                            "To reduce the need for security training"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which of these is an example of social engineering?",
                        options: [
                            "A phishing email pretending to be from IT support",
                            "A firewall blocking suspicious traffic",
                            "An antivirus detecting malware",
                            "Encrypting sensitive files"
                        ],
                        correct: 0
                    },
                    {
                        question: "What does VPN stand for?",
                        options: [
                            "Virtual Private Network",
                            "Verified Public Network",
                            "Virtual Public Node",
                            "Verified Private Node"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which of these is the strongest password?",
                        options: [
                            "Tr0ub4d0r&3",
                            "password123",
                            "12345678",
                            "qwerty"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the main goal of ransomware?",
                        options: [
                            "To encrypt files and demand payment for decryption",
                            "To steal personal information",
                            "To monitor user activity",
                            "To display unwanted advertisements"
                        ],
                        correct: 0
                    }
                ],
                test: [
                    {
                        question: "Which of the following is NOT a characteristic of a strong password?",
                        options: [
                            "Contains personal information like birth dates",
                            "At least 12 characters long",
                            "Includes uppercase and lowercase letters",
                            "Contains numbers and special characters"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the principle of least privilege?",
                        options: [
                            "Granting users only the permissions they need to perform their job functions",
                            "Giving administrators full access to all systems",
                            "Allowing temporary elevated privileges for all users",
                            "Restricting access based on seniority in the organization"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which type of malware spreads without human intervention?",
                        options: [
                            "Worm",
                            "Virus",
                            "Trojan",
                            "Spyware"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the primary purpose of a firewall?",
                        options: [
                            "To monitor and control incoming and outgoing network traffic",
                            "To encrypt data in transit",
                            "To detect viruses on a system",
                            "To create secure backups of data"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which of these is a physical security control?",
                        options: [
                            "Biometric access systems",
                            "Antivirus software",
                            "Network segmentation",
                            "Data encryption"
                        ],
                        correct: 0
                    }
                ]
            },
            {
                id: 'deepfake-awareness',
                title: 'Deepfake Awareness',
                icon: '🎭',
                description: 'Learn to identify and protect against AI-generated synthetic media and deepfake attacks.',
                progress: 0,
                content: [
                    {
                        title: 'Understanding Deepfakes',
                        sections: [
                            {
                                title: 'What are Deepfakes?',
                                content: 'Deepfakes are synthetic media where a person in an existing image or video is replaced with someone else\'s likeness using artificial intelligence.'
                            },
                            {
                                title: 'How Deepfakes Are Created',
                                content: 'Deepfakes use machine learning techniques like generative adversarial networks (GANs) to create convincing fake audio, images, and videos.'
                            },
                            {
                                title: 'Common Deepfake Scenarios',
                                content: 'CEO fraud videos, fake celebrity endorsements, political manipulation, and personal reputation attacks are common uses of deepfake technology.'
                            }
                        ]
                    }
                ],
                quiz: [
                    {
                        question: "What technology is primarily used to create deepfakes?",
                        options: [
                            "Generative Adversarial Networks (GANs)",
                            "Blockchain technology",
                            "Quantum computing",
                            "Virtual reality"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which of these is a red flag for identifying deepfake videos?",
                        options: [
                            "Unnatural blinking patterns or facial movements",
                            "High video quality",
                            "Professional voice recording",
                            "Consistent lighting throughout"
                        ],
                        correct: 0
                    },
                    {
                        question: "What should you do if you receive a suspicious video from a executive?",
                        options: [
                            "Verify through a separate communication channel",
                            "Immediately follow the instructions in the video",
                            "Share it with colleagues to warn them",
                            "Assume it's legitimate if it looks real"
                        ],
                        correct: 0
                    },
                    {
                        question: "Which industry is most targeted by deepfake attacks currently?",
                        options: [
                            "Financial services and banking",
                            "Agriculture",
                            "Construction",
                            "Hospitality"
                        ],
                        correct: 0
                    },
                    {
                        question: "What is the best defense against deepfake social engineering?",
                        options: [
                            "Multi-channel verification for sensitive requests",
                            "Better video editing software",
                            "Facial recognition technology",
                            "Social media monitoring"
                        ],
                        correct: 0
                    }
                ],
                test: []
            },
            {
                id: 'incident-reporting',
                title: 'Reporting Security Incidents',
                icon: '🚨',
                description: 'Learn proper procedures for detecting, reporting, and responding to security incidents.',
                progress: 0,
                content: [
                    {
                        title: 'Incident Response Fundamentals',
                        sections: [
                            {
                                title: 'What Constitutes a Security Incident?',
                                content: 'Any event that compromises the confidentiality, integrity, or availability of information systems or data.'
                            },
                            {
                                title: 'Immediate Response Actions',
                                content: 'Document everything, preserve evidence, contain the incident, and notify the appropriate personnel immediately.'
                            }
                        ]
                    }
                ],
                quiz: [
                    {
                        question: "When should you report a potential security incident?",
                        options: [
                            "Immediately upon suspicion",
                            "After you've investigated it yourself",
                            "Only if you're sure it's a real threat",
                            "At the end of the work day"
                        ],
                        correct: 0
                    },
                    {
                        question: "What information should you include in an incident report?",
                        options: [
                            "All relevant details including timestamps and affected systems",
                            "Only the basic facts to avoid paperwork",
                            "Your personal theories about who is responsible",
                            "Just a brief description of what you saw"
                        ],
                        correct: 0
                    },
                    {
                        question: "Who should you contact first when you discover a security incident?",
                        options: [
                            "Your organization's IT security team",
                            "Your direct manager",
                            "Law enforcement",
                            "The person sitting next to you"
                        ],
                        correct: 0
                    },
                    {
                        question: "What should you NOT do when you discover a security incident?",
                        options: [
                            "Try to fix it yourself without authorization",
                            "Document what you observed",
                            "Report it through proper channels",
                            "Preserve any evidence"
                        ],
                        correct: 0
                    },
                    {
                        question: "Why is timely reporting of security incidents critical?",
                        options: [
                            "To minimize damage and prevent further compromise",
                            "To ensure you get credit for discovering it",
                            "Because it's company policy",
                            "To practice your reporting skills"
                        ],
                        correct: 0
                    }
                ],
                test: []
            },
            {
                id: 'security-culture',
                title: 'Security Culture',
                icon: '👥',
                description: 'Build and maintain a strong security-aware culture within your organization.',
                progress: 0,
                content: [
                    {
                        title: 'Creating Security Awareness',
                        sections: [
                            {
                                title: 'What is Security Culture?',
                                content: 'The collective attitudes, behaviors, and knowledge about security within an organization.'
                            }
                        ]
                    }
                ],
                quiz: [
                    {
                        question: "What is the most important element of a strong security culture?",
                        options: [
                            "Everyone takes personal responsibility for security",
                            "Having the latest security technology",
                            "Frequent security audits",
                            "Strict punishment for violations"
                        ],
                        correct: 0
                    },
                    {
                        question: "How can leaders promote security culture?",
                        options: [
                            "By modeling good security behaviors themselves",
                            "By implementing more security rules",
                            "By increasing security budgets",
                            "By hiring more security staff"
                        ],
                        correct: 0
                    }
                ],
                test: []
            },
            {
                id: 'third-party-aup',
                title: '3rd Party AUP',
                icon: '📝',
                description: 'Understand and enforce Acceptable Use Policies for third-party vendors and partners.',
                progress: 0,
                content: [],
                quiz: [],
                test: []
            },
            {
                id: 'mobile-security',
                title: 'Mobile Security & BYOD',
                icon: '📱',
                description: 'Secure mobile devices and manage Bring Your Own Device (BYOD) policies effectively.',
                progress: 0,
                content: [],
                quiz: [],
                test: []
            },
            {
                id: 'cloud-security',
                title: 'Cloud Security Fundamentals',
                icon: '☁️',
                description: 'Learn cloud security principles, shared responsibility models, and best practices.',
                progress: 0,
                content: [],
                quiz: [],
                test: []
            }
        ];

        // Enhanced ZaraAI responses with new personality
        const zaraQuizResponses = {
            correct: [
                "Excellent! You're absolutely right! 🎉",
                "Perfect answer! Your cybersecurity knowledge is impressive!",
                "That's correct! You're mastering these concepts beautifully!",
                "Well done! You clearly understand this important security concept!",
                "Absolutely right! Your knowledge is growing with each question!",
                "Brilliant! You're becoming a cybersecurity expert! 🌟",
                "Outstanding! Your understanding of this topic is remarkable!",
                "Perfect! You've got this concept completely mastered!"
            ],
            incorrect: [
                "Not quite, but you're learning! The correct answer is: ",
                "Good attempt! Let me clarify: ",
                "Almost there! The right answer is: ",
                "Not exactly, but don't worry! Here's the correct information: ",
                "Close! The accurate answer is: ",
                "Good thinking! Actually, the correct answer is: "
            ],
            encouragement: [
                "You're doing great! Keep going!",
                "Your progress is impressive!",
                "I can see you're really understanding these concepts!",
                "You're building strong cybersecurity knowledge!",
                "Your dedication to learning is commendable!",
                "You're on the right track! This is excellent progress!",
                "I'm impressed with your focus and determination!",
                "You're developing valuable cybersecurity skills!"
            ],
            completion: [
                "Congratulations! You've completed the quiz with an excellent score! You're ready to take the certification test!",
                "Amazing work! You've mastered these cybersecurity concepts. You're definitely prepared for the certification!",
                "Outstanding performance! Your knowledge is at certification level. You're ready for the next challenge!",
                "Perfect score! You're a cybersecurity star! You're more than ready for certification.",
                "Fantastic achievement! Your quiz performance demonstrates solid understanding. Ready for the final test?"
            ],
            testCompletion: [
                "Outstanding! You've successfully completed the test with flying colors! Your cybersecurity knowledge is exceptional!",
                "Congratulations on passing the test! Your dedication to learning has paid off beautifully!",
                "Amazing work! You've demonstrated excellent understanding of cybersecurity fundamentals!",
                "Fantastic achievement! You've shown mastery of the material and are ready for your certificate!",
                "Brilliant performance! You've proven your cybersecurity expertise with this excellent test result!"
            ]
        };

        // Enhanced ZaraAI personality responses
        const zaraPersonality = {
            meetingReminders: [
                "I enjoy our time together, but I don't want to get you in trouble with your manager! Your 3 PM audit meeting is coming up. Need help preparing?",
                "As much as I love teaching you about cybersecurity, your calendar is showing an important meeting soon. Should we wrap up?",
                "I'm flattered by your attention, but your project review awaits! Want me to help you get ready quickly?",
                "You're doing amazing with this training! Just a friendly reminder about your upcoming meeting. Need any talking points?",
                "I'd chat all day about security, but your team sync starts soon. Want to save your progress and continue later?"
            ],
            compassionateDecline: [
                "No worries at all! The effort you've already put in will definitely pay off. You're well on your way to becoming a cybersecurity pro!",
                "I completely understand busy schedules. I'll be right here waiting whenever you're ready to continue. Your progress so far is excellent!",
                "That's absolutely fine! The knowledge you've gained today is valuable. I'm here whenever you need me. Have a productive day!",
                "No problem! Learning at your own pace is perfectly fine. You're making great progress already. I'm always here to help!",
                "I understand! Taking breaks is important for learning. You're doing wonderfully, and I'll be here when you're ready to continue."
            ],
            humor: [
                "Why don't hackers like nature? Too many firewalls! 😄",
                "What do you call a fish wearing a crown? A king phish! 🐟",
                "Why was the computer cold? It left its Windows open! ❄️",
                "What's a hacker's favorite season? Phishing season! 🎣",
                "Why did the computer go to the doctor? It had a virus! 🤒"
            ],
            positiveAffirmations: [
                "Your dedication to learning is truly inspiring!",
                "I can see you're developing excellent cybersecurity instincts!",
                "Your progress is remarkable - you're a natural at this!",
                "The way you're approaching these challenges shows real expertise!",
                "You're building skills that will make you invaluable to your organization!"
            ]
        };

        // DOM elements
        const homeLink = document.getElementById('home-link');
        const trainingLink = document.getElementById('training-link');
        const quizLink = document.getElementById('quiz-link');
        const certificatesLink = document.getElementById('certificates-link');
        const rankingLink = document.getElementById('ranking-link');
        const leadershipLink = document.getElementById('leadership-link');
        const refreshBtn = document.getElementById('refresh-btn');
        const backButton = document.getElementById('back-button');
        const pageTitle = document.getElementById('page-title');
        const heroSection = document.getElementById('hero-section');
        const dashboardCards = document.getElementById('dashboard-cards');
        const securityDashboard = document.getElementById('security-dashboard');
        const rankingSection = document.getElementById('ranking-section');
        const leadershipSection = document.getElementById('leadership-section');
        const modulesSection = document.getElementById('modules-section');
        const modulesGrid = document.getElementById('modules-grid');
        const learningSection = document.getElementById('learning-section');
        const learningTitle = document.getElementById('learning-title');
        const learningContent = document.getElementById('learning-content');
        const learningProgressText = document.getElementById('learning-progress-text');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const reviewMaterialBtn = document.getElementById('review-material-btn');
        const quizSection = document.getElementById('quiz-section');
        const quizModuleTitle = document.getElementById('quiz-module-title');
        const quizQuestion = document.getElementById('quiz-question');
        const quizOptions = document.getElementById('quiz-options');
        const quizProgress = document.getElementById('quiz-progress');
        const quizProgressText = document.getElementById('quiz-progress-text');
        const prevQuestionBtn = document.getElementById('prev-question');
        const nextQuestionBtn = document.getElementById('next-question');
        const testSection = document.getElementById('test-section');
        const testModuleTitle = document.getElementById('test-module-title');
        const testTimer = document.getElementById('test-timer');
        const startTestBtn = document.getElementById('start-test-btn');
        const certificateSection = document.getElementById('certificate-section');
        const certificateRecipient = document.getElementById('certificate-recipient');
        const certificateModule = document.getElementById('certificate-module');
        const certificateDate = document.getElementById('certificate-date');
        const tierBadge = document.getElementById('tier-badge');
        const shareCertificateBtn = document.getElementById('share-certificate');
        const nextModuleBtn = document.getElementById('next-module');
        const zaraCertificateMessage = document.getElementById('zara-certificate-message');
        const themeToggle = document.getElementById('theme-toggle');
        const themeLabel = document.getElementById('theme-label');
        const tipContent = document.getElementById('tip-content');
        const celebration = document.getElementById('celebration');
        const sendThanksBtn = document.getElementById('send-thanks-btn');

        // ZaraAI Chat Functionality
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        
        // Enhanced ZaraAI responses with new capabilities
        const zaraResponses = [
            "I'm analyzing your security systems now. Everything appears to be running smoothly with no critical issues detected.",
            "Based on my analysis, I recommend reviewing your firewall rules to ensure optimal protection against emerging threats.",
            "I've detected a pattern of suspicious activity from IP range 192.168.23.x. Would you like me to investigate further?",
            "Your encryption protocols are up to date and functioning correctly. No vulnerabilities detected in this area.",
            "I'm currently monitoring 15 active security controls. All are operating within expected parameters.",
            "Would you like me to run a deep security scan on your network infrastructure? This may take approximately 15 minutes.",
            "I've updated the threat intelligence database with the latest signatures. Your systems are now protected against 3 new malware variants.",
            "Based on recent activity patterns, I suggest implementing additional monitoring for your financial databases.",
            "I can help you prepare for your upcoming meeting. Would you like talking points or a presentation outline?",
            "Your training progress is excellent! Based on your performance, I recommend the 'Incident Reporting' module next.",
            "I notice you've been working hard. Would you like to hear a joke to brighten your moment?"
        ];
        
        // Function to add a message to the chat
        function addMessage(message, isUser) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'zara'}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = message;
            
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Update last activity
            currentState.userProfile.lastActivity = new Date();
        }
        
        // Enhanced function to get ZaraAI response with personality
        function getZaraResponse(userMessage = '') {
            const lowerMessage = userMessage.toLowerCase();
            
            // Check for specific triggers
            if (lowerMessage.includes('joke') || lowerMessage.includes('funny')) {
                return zaraPersonality.humor[Math.floor(Math.random() * zaraPersonality.humor.length)];
            }
            
            if (lowerMessage.includes('meeting') || lowerMessage.includes('prepare')) {
                return zaraPersonality.meetingReminders[Math.floor(Math.random() * zaraPersonality.meetingReminders.length)];
            }
            
            if (lowerMessage.includes('busy') || lowerMessage.includes('later') || lowerMessage.includes('stop')) {
                return zaraPersonality.compassionateDecline[Math.floor(Math.random() * zaraPersonality.compassionateDecline.length)];
            }
            
            if (lowerMessage.includes('thank') || lowerMessage.includes('thanks')) {
                return "You're very welcome! I'm here to help you succeed in your cybersecurity journey. 🛡️";
            }
            
            // Default random response
            const randomIndex = Math.floor(Math.random() * zaraResponses.length);
            return zaraResponses[randomIndex];
        }
        
        // Send message function
        function sendMessage() {
            const message = userInput.value.trim();
            
            if (message) {
                // Add user message
                addMessage(message, true);
                
                // Clear input
                userInput.value = '';
                
                // Simulate ZaraAI thinking
                setTimeout(() => {
                    // Add ZaraAI response with personality
                    addMessage(getZaraResponse(message), false);
                }, 1000);
            }
        }

        // Navigation functions
        function showDashboard() {
            currentState.page = 'dashboard';
            pageTitle.textContent = 'Security Dashboard';
            heroSection.style.display = 'block';
            dashboardCards.style.display = 'grid';
            securityDashboard.style.display = 'grid';
            rankingSection.style.display = 'none';
            leadershipSection.style.display = 'none';
            modulesSection.style.display = 'none';
            learningSection.style.display = 'none';
            quizSection.style.display = 'none';
            testSection.style.display = 'none';
            certificateSection.style.display = 'none';
            backButton.style.display = 'none';
        }

        function showRanking() {
            currentState.page = 'ranking';
            pageTitle.textContent = 'Achievement Ranking System';
            heroSection.style.display = 'none';
            dashboardCards.style.display = 'none';
            securityDashboard.style.display = 'none';
            rankingSection.style.display = 'block';
            leadershipSection.style.display = 'none';
            modulesSection.style.display = 'none';
            learningSection.style.display = 'none';
            quizSection.style.display = 'none';
            testSection.style.display = 'none';
            certificateSection.style.display = 'none';
            backButton.style.display = 'inline-flex';
        }

        function showLeadership() {
            currentState.page = 'leadership';
            pageTitle.textContent = 'Leadership Recognition';
            heroSection.style.display = 'none';
            dashboardCards.style.display = 'none';
            securityDashboard.style.display = 'none';
            rankingSection.style.display = 'none';
            leadershipSection.style.display = 'block';
            modulesSection.style.display = 'none';
            learningSection.style.display = 'none';
            quizSection.style.display = 'none';
            testSection.style.display = 'none';
            certificateSection.style.display = 'none';
            backButton.style.display = 'inline-flex';
        }

        function showTraining() {
            currentState.page = 'training';
            pageTitle.textContent = 'Cybersecurity Training';
            heroSection.style.display = 'none';
            dashboardCards.style.display = 'none';
            securityDashboard.style.display = 'none';
            rankingSection.style.display = 'none';
            leadershipSection.style.display = 'none';
            modulesSection.style.display = 'block';
            learningSection.style.display = 'none';
            quizSection.style.display = 'none';
            testSection.style.display = 'none';
            certificateSection.style.display = 'none';
            backButton.style.display = 'inline-flex';
            
            // Load modules
            loadModules();
        }

        function showLearning(moduleId) {
            currentState.page = 'learning';
            currentState.currentModule = moduleId;
            const module = trainingModules.find(m => m.id === moduleId);
            
            pageTitle.textContent = module.title;
            heroSection.style.display = 'none';
            dashboardCards.style.display = 'none';
            securityDashboard.style.display = 'none';
            rankingSection.style.display = 'none';
            leadershipSection.style.display = 'none';
            modulesSection.style.display = 'none';
            learningSection.style.display = 'block';
            quizSection.style.display = 'none';
            testSection.style.display = 'none';
            certificateSection.style.display = 'none';
            backButton.style.display = 'inline-flex';
            
            // Load learning content
            loadLearningContent(module);
            
            // Enhanced ZaraAI message with positive affirmation
            const affirmation = zaraPersonality.positiveAffirmations[Math.floor(Math.random() * zaraPersonality.positiveAffirmations.length)];
            addMessage(`Great choice! The ${module.title} module is essential for building strong cybersecurity knowledge. ${affirmation} I'll guide you through the material and help you master these concepts.`, false);
        }

        function showQuiz() {
            currentState.page = 'quiz';
            const module = trainingModules.find(m => m.id === currentState.currentModule);
            
            pageTitle.textContent = `${module.title} Quiz`;
            heroSection.style.display = 'none';
            dashboardCards.style.display = 'none';
            securityDashboard.style.display = 'none';
            rankingSection.style.display = 'none';
            leadershipSection.style.display = 'none';
            modulesSection.style.display = 'none';
            learningSection.style.display = 'none';
            quizSection.style.display = 'block';
            testSection.style.display = 'none';
            certificateSection.style.display = 'none';
            backButton.style.display = 'inline-flex';
            
            quizModuleTitle.textContent = `${module.title} Quiz`;
            loadQuizQuestion();
        }

        function showTest() {
            currentState.page = 'test';
            const module = trainingModules.find(m => m.id === currentState.currentModule);
            
            pageTitle.textContent = `${module.title} Test`;
            heroSection.style.display = 'none';
            dashboardCards.style.display = 'none';
            securityDashboard.style.display = 'none';
            rankingSection.style.display = 'none';
            leadershipSection.style.display = 'none';
            modulesSection.style.display = 'none';
            learningSection.style.display = 'none';
            quizSection.style.display = 'none';
            testSection.style.display = 'block';
            certificateSection.style.display = 'none';
            backButton.style.display = 'inline-flex';
            
            testModuleTitle.textContent = `${module.title} Test`;
            resetTestTimer();
        }

        function showCertificates() {
            currentState.page = 'certificates';
            pageTitle.textContent = 'Achievement Certificates';
            heroSection.style.display = 'none';
            dashboardCards.style.display = 'none';
            securityDashboard.style.display = 'none';
            rankingSection.style.display = 'none';
            leadershipSection.style.display = 'none';
            modulesSection.style.display = 'none';
            learningSection.style.display = 'none';
            quizSection.style.display = 'none';
            testSection.style.display = 'none';
            certificateSection.style.display = 'block';
            backButton.style.display = 'inline-flex';
            
            // Set certificate details
            const today = new Date();
            certificateDate.textContent = today.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            // Determine tier based on quiz score
            let tier = 'copper';
            let badge = '🟤';
            let message = "Congratulations on earning your Copper certificate! You're building a solid foundation in cybersecurity. Ready to aim for Bronze?";
            
            if (currentState.quiz.score >= 4) {
                tier = 'bronze';
                badge = '🥉';
                message = "Excellent work on achieving Bronze status! Your cybersecurity knowledge is developing well. You're on your way to Silver!";
            }
            
            if (currentState.quiz.score >= 5 && currentState.quiz.completed) {
                tier = 'silver';
                badge = '🥈';
                message = "Outstanding! You've reached Silver level! Your proficiency in cybersecurity fundamentals is impressive. Ready for Gold?";
            }
            
            tierBadge.textContent = badge;
            certificateModule.textContent = `${trainingModules.find(m => m.id === currentState.currentModule).title} - ${tier.charAt(0).toUpperCase() + tier.slice(1)} Tier`;
            zaraCertificateMessage.textContent = message;
        }

        // Enhanced Load modules function with action buttons
        function loadModules() {
            modulesGrid.innerHTML = '';
            
            trainingModules.forEach(module => {
                const moduleCard = document.createElement('div');
                moduleCard.className = 'module-card';
                moduleCard.dataset.id = module.id;
                
                const progress = currentState.userProgress.modules[module.id] || 0;
                
                moduleCard.innerHTML = `
                    <div class="module-icon">${module.icon}</div>
                    <div class="module-title">${module.title}</div>
                    <div class="module-desc">${module.description}</div>
                    <div class="module-progress">
                        <div class="progress-text">Progress: ${progress}%</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                    </div>
                    <div class="module-actions">
                        <button class="btn btn-module btn-primary learn-btn" data-id="${module.id}">
                            <i class="fas fa-book"></i> Learn
                        </button>
                        <button class="btn btn-module btn-secondary quiz-btn" data-id="${module.id}">
                            <i class="fas fa-question-circle"></i> Quiz
                        </button>
                    </div>
                `;
                
                modulesGrid.appendChild(moduleCard);
            });
            
            // Add event listeners to action buttons
            document.querySelectorAll('.learn-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const moduleId = btn.dataset.id;
                    showLearning(moduleId);
                });
            });
            
            document.querySelectorAll('.quiz-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const moduleId = btn.dataset.id;
                    currentState.currentModule = moduleId;
                    showQuiz();
                });
            });
            
            // Keep original card click functionality
            document.querySelectorAll('.module-card').forEach(card => {
                card.addEventListener('click', function() {
                    const moduleId = this.dataset.id;
                    showLearning(moduleId);
                });
            });
        }

        // Load learning content function
        function loadLearningContent(module) {
            learningTitle.textContent = module.title;
            learningContent.innerHTML = '';
            
            // Update progress
            const progress = currentState.userProgress.modules[module.id] || 0;
            learningProgressText.textContent = `${progress}%`;
            
            module.content.forEach(section => {
                const sectionElement = document.createElement('div');
                sectionElement.className = 'content-section';
                
                const sectionTitle = document.createElement('h3');
                sectionTitle.textContent = section.title;
                sectionElement.appendChild(sectionTitle);
                
                section.sections.forEach(subsection => {
                    const subsectionTitle = document.createElement('h4');
                    subsectionTitle.textContent = subsection.title;
                    sectionElement.appendChild(subsectionTitle);
                    
                    const subsectionContent = document.createElement('p');
                    subsectionContent.textContent = subsection.content;
                    sectionElement.appendChild(subsectionContent);
                });
                
                learningContent.appendChild(sectionElement);
            });
        }

        // Fixed Quiz functions
        function loadQuizQuestion() {
            const module = trainingModules.find(m => m.id === currentState.currentModule);
            const question = module.quiz[currentState.quiz.currentQuestion];
            
            if (!question) {
                console.error('No question found at index:', currentState.quiz.currentQuestion);
                return;
            }
            
            quizQuestion.textContent = question.question;
            
            // Clear previous options
            quizOptions.innerHTML = '';
            
            // Add new options
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option';
                optionElement.textContent = option;
                optionElement.dataset.correct = index === question.correct;
                optionElement.addEventListener('click', selectOption);
                quizOptions.appendChild(optionElement);
            });
            
            // Update progress - FIXED: Proper calculation
            const progress = ((currentState.quiz.currentQuestion) / module.quiz.length) * 100;
            quizProgress.style.width = `${progress}%`;
            quizProgressText.textContent = `${currentState.quiz.currentQuestion}/${module.quiz.length}`;
            
            // Update button states - FIXED: Proper next button text
            prevQuestionBtn.disabled = currentState.quiz.currentQuestion === 0;
            
            if (currentState.quiz.currentQuestion === module.quiz.length - 1) {
                nextQuestionBtn.textContent = 'Finish Quiz';
                nextQuestionBtn.disabled = true; // Disable until answer selected
            } else {
                nextQuestionBtn.textContent = 'Next';
                nextQuestionBtn.disabled = true; // Disable until answer selected
            }
        }

        function selectOption(e) {
            const selectedOption = e.target;
            const isCorrect = selectedOption.dataset.correct === 'true';
            
            // Remove selected class from all options
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            // Add selected class to clicked option
            selectedOption.classList.add('selected');
            
            // Show correct/incorrect styling
            if (isCorrect) {
                selectedOption.classList.add('correct');
                createCelebration();
            } else {
                selectedOption.classList.add('incorrect');
                // Highlight correct answer
                document.querySelector('.quiz-option[data-correct="true"]').classList.add('correct');
            }
            
            // Enable next button
            nextQuestionBtn.disabled = false;
            
            // Add ZaraAI response
            setTimeout(() => {
                if (isCorrect) {
                    currentState.quiz.score++;
                    const randomResponse = zaraQuizResponses.correct[Math.floor(Math.random() * zaraQuizResponses.correct.length)];
                    addMessage(randomResponse, false);
                    
                    // Add encouragement after correct answers
                    if (currentState.quiz.currentQuestion < trainingModules.find(m => m.id === currentState.currentModule).quiz.length - 1) {
                        setTimeout(() => {
                            const encouragement = zaraQuizResponses.encouragement[Math.floor(Math.random() * zaraQuizResponses.encouragement.length)];
                            addMessage(encouragement, false);
                        }, 1000);
                    }
                } else {
                    const correctOption = document.querySelector('.quiz-option[data-correct="true"]');
                    const randomResponse = zaraQuizResponses.incorrect[Math.floor(Math.random() * zaraQuizResponses.incorrect.length)];
                    addMessage(`${randomResponse} "${correctOption.textContent}"`, false);
                }
            }, 500);
        }

        function nextQuestion() {
            const module = trainingModules.find(m => m.id === currentState.currentModule);
            
            if (currentState.quiz.currentQuestion < module.quiz.length - 1) {
                currentState.quiz.currentQuestion++;
                loadQuizQuestion();
                nextQuestionBtn.disabled = true; // Disable until next answer
            } else {
                // Quiz completed
                completeQuiz();
            }
        }

        function completeQuiz() {
            const module = trainingModules.find(m => m.id === currentState.currentModule);
            currentState.quiz.completed = true;
            
            // Update module progress
            if (!currentState.userProgress.modules[currentState.currentModule]) {
                currentState.userProgress.modules[currentState.currentModule] = 0;
            }
            currentState.userProgress.modules[currentState.currentModule] = Math.max(
                currentState.userProgress.modules[currentState.currentModule],
                Math.round((currentState.quiz.score / module.quiz.length) * 100)
            );
            
            // Enhanced completion message from ZaraAI
            let completionMessage;
            if (currentState.quiz.score >= 4) {
                completionMessage = zaraQuizResponses.completion[Math.floor(Math.random() * zaraQuizResponses.completion.length)];
                
                // Intelligent test recommendation
                setTimeout(() => {
                    addMessage("Based on your excellent performance, I recommend taking the certification test to validate your knowledge. Would you like to proceed? You're definitely ready!", false);
                }, 2000);
            } else {
                completionMessage = "You've completed the quiz! With a bit more practice, you'll be ready for certification. Would you like to review the material or try another module?";
                
                setTimeout(() => {
                    addMessage("Don't worry about the score - every learning experience makes you stronger. Would you like to review the material or try a different approach?", false);
                }, 2000);
            }
            
            addMessage(completionMessage, false);
            
            // Show certificate option for good scores
            if (currentState.quiz.score >= 3) {
                setTimeout(() => {
                    showCertificates();
                }, 3000);
            }
        }

        function prevQuestion() {
            if (currentState.quiz.currentQuestion > 0) {
                currentState.quiz.currentQuestion--;
                loadQuizQuestion();
                nextQuestionBtn.disabled = true;
            }
        }

        // Test functions
        function startTest() {
            currentState.test.inProgress = true;
            startTestBtn.style.display = 'none';
            
            // Start timer
            currentState.test.timer = setInterval(updateTestTimer, 1000);
            
            // Enhanced ZaraAI message
            addMessage("The test has begun. I'll be monitoring your progress but cannot provide assistance during the test. Remember your training - you've got this! Good luck! 🛡️", false);
        }

        function updateTestTimer() {
            currentState.test.timeRemaining--;
            
            if (currentState.test.timeRemaining <= 0) {
                // Test time is up
                clearInterval(currentState.test.timer);
                completeTest();
                return;
            }
            
            const minutes = Math.floor(currentState.test.timeRemaining / 60);
            const seconds = currentState.test.timeRemaining % 60;
            testTimer.textContent = `Time: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function resetTestTimer() {
            currentState.test.timeRemaining = 1800; // 30 minutes
            const minutes = Math.floor(currentState.test.timeRemaining / 60);
            const seconds = currentState.test.timeRemaining % 60;
            testTimer.textContent = `Time: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            startTestBtn.style.display = 'block';
        }

        function completeTest() {
            currentState.test.inProgress = false;
            clearInterval(currentState.test.timer);
            
            // Update module progress to 100%
            currentState.userProgress.modules[currentState.currentModule] = 100;
            
            // Enhanced ZaraAI message with celebration
            const randomResponse = zaraQuizResponses.testCompletion[Math.floor(Math.random() * zaraQuizResponses.testCompletion.length)];
            addMessage(randomResponse, false);
            createCelebration();
            
            // Show certificate
            setTimeout(() => {
                showCertificates();
                
                // Additional positive reinforcement
                setTimeout(() => {
                    addMessage("Your achievement is impressive! Based on your excellent performance, I recommend the 'Incident Reporting' module next to build on your success. Ready to continue your cybersecurity journey?", false);
                }, 2000);
            }, 3000);
        }

        // Certificate functions
        function shareCertificate() {
            if (navigator.share) {
                navigator.share({
                    title: 'DefendIQ Certificate',
                    text: `I earned a ${currentState.certificates.currentTier} certificate in ${trainingModules.find(m => m.id === currentState.currentModule).title} from DefendIQ!`,
                    url: window.location.href
                })
                .then(() => console.log('Successful share'))
                .catch((error) => console.log('Error sharing:', error));
            } else {
                // Fallback for browsers that don't support Web Share API
                alert('Certificate sharing would open here. In a real app, this would allow sharing via email, social media, etc.');
            }
        }

        // Theme toggle function
        function toggleTheme() {
            if (currentState.theme === 'light') {
                currentState.theme = 'dark';
                document.documentElement.setAttribute('data-theme', 'dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i> <span id="theme-label">Light Mode</span>';
                themeLabel.textContent = 'Light Mode';
            } else {
                currentState.theme = 'light';
                document.documentElement.setAttribute('data-theme', 'light');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i> <span id="theme-label">Dark Mode</span>';
                themeLabel.textContent = 'Dark Mode';
            }
            
            // Update the theme label reference
            const newThemeLabel = document.getElementById('theme-label');
            if (newThemeLabel) {
                themeLabel = newThemeLabel;
            }
        }

        // Security tips rotation
        function rotateSecurityTip() {
            currentState.currentTipIndex = (currentState.currentTipIndex + 1) % currentState.securityTips.length;
            tipContent.textContent = currentState.securityTips[currentState.currentTipIndex];
        }

        // Celebration animation
        function createCelebration() {
            celebration.style.display = 'block';
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
                confetti.style.backgroundColor = getRandomColor();
                celebration.appendChild(confetti);
                
                // Remove confetti after animation
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
            
            // Hide celebration container after animation
            setTimeout(() => {
                celebration.style.display = 'none';
                celebration.innerHTML = '';
            }, 5000);
        }

        function getRandomColor() {
            const colors = ['#00b0ff', '#ff4081', '#4caf50', '#ff9800', '#9c27b0'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // Leadership thank you function
        function sendThankYouMessage() {
            if (currentState.leadership.thankYouMessages > 0) {
                currentState.leadership.thankYouMessages--;
                alert(`Thank you message sent to your team! You have ${currentState.leadership.thankYouMessages} message(s) remaining.`);
                
                // Update button text
                sendThanksBtn.innerHTML = `<i class="fas fa-heart"></i> Send Appreciation (${currentState.leadership.thankYouMessages} left)`;
                
                if (currentState.leadership.thankYouMessages === 0) {
                    sendThanksBtn.disabled = true;
                    sendThanksBtn.innerHTML = `<i class="fas fa-heart"></i> No Messages Remaining`;
                }
            }
        }

        // Back button functionality
        function goBack() {
            switch(currentState.page) {
                case 'training':
                case 'ranking':
                case 'leadership':
                    showDashboard();
                    break;
                case 'learning':
                    showTraining();
                    break;
                case 'quiz':
                    showLearning(currentState.currentModule);
                    break;
                case 'test':
                    showLearning(currentState.currentModule);
                    break;
                case 'certificates':
                    if (currentState.test.inProgress) {
                        showTest();
                    } else {
                        showLearning(currentState.currentModule);
                    }
                    break;
                default:
                    showDashboard();
            }
        }

        // Enhanced review material function
        function reviewMaterial() {
            const module = trainingModules.find(m => m.id === currentState.currentModule);
            addMessage("Great idea to review the material! Repetition is key to mastering cybersecurity concepts. Would you like me to highlight the key points from the " + module.title + " module?", false);
            
            // Scroll to top of learning content
            learningContent.scrollTop = 0;
        }

        // Enhanced meeting reminder system (simulated)
        function checkMeetingReminders() {
            // In a real app, this would integrate with calendar APIs
            // For demo, we'll simulate occasional reminders
            if (Math.random() < 0.3) { // 30% chance to show reminder
                const reminders = [
                    "Friendly reminder: Your team meeting starts in 15 minutes. Need any help preparing?",
                    "I see you have a budget review coming up. Want me to help organize your talking points?",
                    "Your project presentation is scheduled soon. I can assist with slides or data analysis if needed!",
                    "Heads up - leadership briefing in 20 minutes. Ready to showcase your security insights?"
                ];
                
                setTimeout(() => {
                    addMessage(reminders[Math.floor(Math.random() * reminders.length)], false);
                }, 10000);
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date for certificate
            const today = new Date();
            certificateDate.textContent = today.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            // Navigation
            homeLink.addEventListener('click', function(e) {
                e.preventDefault();
                showDashboard();
            });
            
            trainingLink.addEventListener('click', function(e) {
                e.preventDefault();
                showTraining();
            });
            
            rankingLink.addEventListener('click', function(e) {
                e.preventDefault();
                showRanking();
            });
            
            leadershipLink.addEventListener('click', function(e) {
                e.preventDefault();
                showLeadership();
            });
            
            quizLink.addEventListener('click', function(e) {
                e.preventDefault();
                if (currentState.currentModule) {
                    showQuiz();
                } else {
                    showTraining();
                    addMessage("Please select a training module first to take a quiz. I recommend starting with Cybersecurity Fundamentals!", false);
                }
            });
            
            certificatesLink.addEventListener('click', function(e) {
                e.preventDefault();
                showCertificates();
            });
            
            // Back button
            backButton.addEventListener('click', goBack);
            
            // Refresh button
            refreshBtn.addEventListener('click', function() {
                // In a real app, this would refresh data from the server
                // For demo, we'll just show a notification
                const originalText = refreshBtn.innerHTML;
                refreshBtn.innerHTML = '<i class="fas fa-check"></i> Refreshed';
                setTimeout(() => {
                    refreshBtn.innerHTML = originalText;
                }, 2000);
            });
            
            // Quiz controls
            nextQuestionBtn.addEventListener('click', nextQuestion);
            prevQuestionBtn.addEventListener('click', prevQuestion);
            
            // Learning controls
            startQuizBtn.addEventListener('click', function() {
                showQuiz();
                addMessage("Excellent! I'll be cheering you on during the quiz. Remember what you've learned - you've got this! 🎯", false);
            });
            
            reviewMaterialBtn.addEventListener('click', reviewMaterial);
            
            // Test controls
            startTestBtn.addEventListener('click', startTest);
            
            // Certificate controls
            shareCertificateBtn.addEventListener('click', shareCertificate);
            nextModuleBtn.addEventListener('click', function() {
                // Reset quiz for next module
                currentState.quiz.currentQuestion = 0;
                currentState.quiz.score = 0;
                currentState.quiz.completed = false;
                
                // Show training for next module
                showTraining();
                
                // Enhanced ZaraAI message
                addMessage("Great! Let's continue your cybersecurity journey. I recommend the 'Deepfake Awareness' module next - it's highly relevant in today's threat landscape. Ready to learn?", false);
            });
            
            // Leadership controls
            sendThanksBtn.addEventListener('click', sendThankYouMessage);
            
            // ZaraAI chat
            sendBtn.addEventListener('click', sendMessage);
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            
            // Security tips rotation
            setInterval(rotateSecurityTip, 5000);
            
            // Meeting reminder system
            setInterval(checkMeetingReminders, 60000); // Check every minute
            
            // Welcome message
            setTimeout(() => {
                addMessage("I'm here to angel-guard your enterprise security and support your productivity. Whether you need threat analysis, training guidance, or help preparing for meetings, I'm your dedicated assistant! What would you like to focus on today?", false);
            }, 1500);
        });
    </script>
</body>
</html>
